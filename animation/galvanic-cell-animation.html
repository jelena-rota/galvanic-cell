<!DOCTYPE html>
<html>
<head>

  <meta charset="UTF-8">
  <title>Galvanic Cell Animation</title>
  <link rel="stylesheet" href="style.css">
  <script type="text/javascript" src="paper-full.js"></script>
  <script type="text/paperscript" canvas="canvas">

var line1, line2, line3, line4, line5, line6, line7, line8, line9, line10, line11, line12;
var cell1, cell2, anode, cathode;
var group1, group2;
var text1, text2, text3, text4, text5, text6, text7, text8;
var ion1, ion2, ion3, ion4, ion5, ion6, ion7, ion8, ion9, ion10, ion11, ion12;
var t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12;
var membrane1, membrane2;

// anode cell with edges
cell1 = new Shape.Rectangle({
  center: [200, 450],
  size: [250, 300],
  fillColor: 'lightblue',
  strokeWidth: 5,
});

line1 = new Path.Line([75, 275],[75, 602.5]);
line1.strokeColor = 'black';
line1.strokeWidth = 5;

line2 = new Path.Line([325, 275],[325, 602.5]);
line2.strokeColor = 'black';
line2.strokeWidth = 5;

line3 = new Path.Line([75, 600],[325, 600]);
line3.strokeColor = 'black';
line3.strokeWidth = 5;

// cathode cell with edges
cell2 = new Shape.Rectangle({
  center: [650, 450],
  size: [250, 300],
  fillColor: '#0066ff',
});

line4 = new Path.Line([525, 275],[525, 602.5]);
line4.strokeColor = 'black';
line4.strokeWidth = 5;

line5 = new Path.Line([775, 275],[775, 602.5]);
line5.strokeColor = 'black';
line5.strokeWidth = 5;

line6 = new Path.Line([525, 600],[775, 600]);
line6.strokeColor = 'black';
line6.strokeWidth = 5;

// zinc anode
anode = new Path.Line([150, 250],[150, 575]);
anode.strokeColor = 'grey';
anode.strokeWidth = 50;

// copper cathode
cathode = new Path.Line([700, 250],[700, 575]);
cathode.strokeColor = 'orange';
cathode.strokeWidth = 50;

// electrons line
line7 = new Path.Line([150, 250],[150, 100]);
line7.strokeColor = 'black';

line8 = new Path.Line([150, 100],[700, 100]);
line8.strokeColor = 'black';

line9 = new Path.Line([700, 100],[700, 250]);
line9.strokeColor = 'black';

// salt bridge
line10 = new Path.Line([280, 195],[280, 300]);
line10.strokeColor = 'lightgrey';
line10.strokeWidth = 60;

line11 = new Path.Line([260, 225],[590, 225]);
line11.strokeColor = 'lightgrey';
line11.strokeWidth = 60;

line12 = new Path.Line([570, 195],[570, 300]);
line12.strokeColor = 'lightgrey';
line12.strokeWidth = 60;

// text
text1 = new PointText({point: [25, 650], content: 'Oxidation: Zn(s) -> Zn(2+) + 2e(-); E° = -0.763 V'});
text2 = new PointText({point: [485, 650], content: 'Reduction: Cu(2+) + 2e(-) -> Cu(s); E° = 0.337 V'});
text3 = new PointText({ point: [18, 260], content: 'Zinc Anode (-)'});
text4 = new PointText({point: [735, 260], content: 'Copper Cathode (+)'});
text5 = new PointText({ point: [385, 275], content: 'Salt Bridge'});
text6 = new PointText({point: [240, 585], content: 'ZnCl2 (aq)'});
text7 = new PointText({point: [540, 585], content: 'CuSO4 (aq)'});
text8 = new PointText({point: [390, 80], content: 'Electrons ->'});

group1 = new Group(text1, text2, text3, text4, text5, text6, text7, text8);
group1.style = {
    justification: 'left',
    fontFamily: 'Courier New',
    fontSize: 12,
    fillColor: 'black'
};

// zinc ions
ion1 = new Path.Circle({
  center: [150, 340],
  radius: [13],
  fillColor: 'grey',
});
t1 = new PointText({point: [150, 344], content: 'Zn2+'});

ion2 = new Path.Circle({
    center: [150, 381],
    radius: [13],
    fillColor: 'grey',
});
t2 = new PointText({point: [150, 385], content: 'Zn2+'});

ion3 = new Path.Circle({
  center: [150, 422],
  radius: [13],
  fillColor: 'grey',
});
t3 = new PointText({point: [150, 426], content: 'Zn2+'});

ion4 = new Path.Circle({
    center: [150, 463],
    radius: [13],
    fillColor: 'grey',
});
t4 = new PointText({point: [150, 467], content: 'Zn2+'});

ion5 = new Path.Circle({
center: [150, 504],
radius: [13],
fillColor: 'grey',
});
t5 = new PointText({point: [150, 508], content: 'Zn2+'});

ion6 = new Path.Circle({
    center: [150, 545],
    radius: [13],
    fillColor: 'grey',
});
t6 = new PointText({point: [150, 549], content: 'Zn2+'});

// copper ions
ion7 = new Path.Circle({
  center: [575, 340],
  radius: [13],
  fillColor: 'orange',
});
t7 = new PointText({point: [575, 344], content: 'Cu2+'});

ion8 = new Path.Circle({
    center: [575, 381],
    radius: [13],
    fillColor: 'orange',
});
t8 = new PointText({point: [575, 385], content: 'Cu2+'});

ion9 = new Path.Circle({
  center: [575, 422],
  radius: [13],
  fillColor: 'orange',
});
t9 = new PointText({point: [575, 426], content: 'Cu2+'});

ion10 = new Path.Circle({
    center: [575, 463],
    radius: [13],
    fillColor: 'orange',
});
t10 = new PointText({point: [575, 467], content: 'Cu2+'});

ion11 = new Path.Circle({
  center: [575, 504],
  radius: [13],
  fillColor: 'orange',
});
t11 = new PointText({point: [575, 509], content: 'Cu2+'});

ion12 = new Path.Circle({
    center: [575, 545],
    radius: [13],
    fillColor: 'orange',
});
t12 = new PointText({point: [575, 549], content: 'Cu2+'});

group2 = new Group(t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12);
group2.style = {
  justification: 'center',
  fontFamily: 'Courier New',
  fontSize: 10,
  fillColor: 'white'
};

// electrons - start
// function way: electron position -> electron coordinates
function way(pos){
  if (pos <= 150/850) {x = 150; y = 250 - pos*850;}
  if (pos > 150/850 && pos < 700/850) {x = pos*850; y = 100;}
  if (pos >= 700/850) {x = 700; y = 100 + pos*850 - 700;}
  return [x, y]
}

// starting positions of electrons
var pos1 = [0/850, 50/850, 100/850, 150/850, 200/850, 250/850, 300/850, 350/850,
  400/850, 450/850, 500/850, 550/850, 600/850, 650/850, 700/850, 750/850, 800/850, 850/850];

// creation of electrons
electrons = [];
for (i = 0; i < pos1.length; i++) {
  electrons[i] = new Path.Circle({
  center: (way(pos1[i])),
  radius: 5,
  fillColor: 'black',
  });
}

var tmp;
// electrons - end

// potassium ions - start
// function way2: potassium ion position -> potassium ion coordinates
function way2(pos){
  if (pos <= 90/500) {x = 265; y = 300 - pos*500;}
  if (pos > 90/500 && pos < 410/500) {x = 265 - 90 + pos*500; y = 210;}
  if (pos >= 410/500) {x = 585; y = 210 + pos*500 - 410;}
  return [x, y]
}

// starting positions of potassium ions
var pos2  = [0/500, 100/500, 200/500, 300/500, 400/500, 500/500];

// creation of potassium ions and text
kalium_ions = [];
kalium_text = [];

for (i = 0; i < pos2.length; i++) {
  kalium_ions[i] = new Path.Circle({
    center: (way2(pos2[i])),
    radius: 13,
    fillColor: 'violet',
  });
  kalium_text[i] = new PointText({
    point:  (way2(pos2[i])),
    content: 'K+',
    fillColor: 'white',
    fontFamily: 'Courier New',
    fontSize: 10,
    justification: 'center'
  });
}

var tmp2;
// kalium ions - end

// nitrate ions movement - start
// function way3: nitrate ion position -> nitrate ion coordinates
function way3(pos){
  if (pos <= 60/380) {x = 555; y = 300 - pos*380;}
  if (pos > 60/380 && pos < 320/380) {x = 555 - pos*380 + 60; y = 240;}
  if (pos >= 320/380) {x = 295; y = 240 + pos*380 - 320;}
  return [x, y]
}

// starting positions of nitrate ions
var pos3  = [0/380, 76/380, 152/380, 228/380, 304/380, 380/380];

// creation of nitrate ions and text
nitrate_ions = [];
nitrate_text = [];

for (i = 0; i < pos3.length; i++) {
  nitrate_ions[i] = new Path.Circle({
    center: (way3(pos3[i])),
    radius: 13,
    fillColor: 'green',
  });
  nitrate_text[i] = new PointText({
    point:  (way3(pos3[i])),
    content: 'NO3-',
    fillColor: 'white',
    fontFamily: 'Courier New',
    fontSize: 10,
    justification: 'center'
  });
}

var tmp3;
// nitrate ions - end

// animation - start
function onFrame(event) {

// electrons animation
for (i = 0; i < pos1.length; i++) {
  pos1[i] = (pos1[i] + 0.001) % 1;
  tmp = way(pos1[i]);
  electrons[i].position.x = tmp[0];
  electrons[i].position.y = tmp[1];
}

// kalium ions animation
for (i = 0; i < pos2.length; i++) {
  pos2[i] = (pos2[i] + 0.0005) % 1;
  tmp2 = way2(pos2[i]);
  kalium_ions[i].position.x = tmp2[0];
  kalium_text[i].position.x = tmp2[0];
  kalium_ions[i].position.y = tmp2[1];
  kalium_text[i].position.y = tmp2[1];
}

// nitrate ions animation
for (i = 0; i < pos3.length; i++) {
  pos3[i] = (pos3[i] + 0.0005) % 1;
  tmp3 = way3(pos3[i]);
  nitrate_ions[i].position.x = tmp3[0];
  nitrate_text[i].position.x = tmp3[0];
  nitrate_ions[i].position.y = tmp3[1];
  nitrate_text[i].position.y = tmp3[1];
}

// zinc ions animation
ion1.position.x += 0.15; t1.position.x += 0.15;
if (ion1.bounds.left> 250) {ion1.position.x = 150; t1.position.x = 150;}

ion2.position.x += 0.2; t2.position.x += 0.2;
if (ion2.bounds.left> 250) {ion2.position.x = 150; t2.position.x = 150;}

ion3.position.x += 0.15; t3.position.x += 0.15;
if (ion3.bounds.left > 250) {ion3.position.x = 150; t3.position.x = 150;}

ion4.position.x += 0.2; t4.position.x += 0.2;
if (ion4.bounds.left > 250) {ion4.position.x = 150; t4.position.x = 150;}

ion5.position.x += 0.15; t5.position.x += 0.15;
if (ion5.bounds.left > 250) {ion5.position.x = 150; t5.position.x = 150;}

ion6.position.x += 0.2; t6.position.x += 0.2;
if (ion6.bounds.left > 250) {ion6.position.x = 150; t6.position.x = 150;}

// copper ions
ion7.position.x += 0.2; t7.position.x += 0.2;
if (ion7.bounds.left > 675) {ion7.position.x = 575; t7.position.x = 575;}

ion8.position.x += 0.15; t8.position.x += 0.15;
if (ion8.bounds.left > 675) {ion8.position.x = 575; t8.position.x = 575;}

ion9.position.x += 0.2; t9.position.x += 0.2;
if (ion9.bounds.left > 675) {ion9.position.x = 575; t9.position.x = 575;}

ion10.position.x += 0.15; t10.position.x += 0.15;
if (ion10.bounds.left > 675) {ion10.position.x = 575; t10.position.x = 575;}

ion11.position.x += 0.2; t11.position.x += 0.2;
if (ion11.bounds.left > 675) {ion11.position.x = 575; t11.position.x = 575;}

ion12.position.x += 0.15; t12.position.x += 0.15;
if (ion12.bounds.left > 675) {ion12.position.x = 575; t12.position.x = 575;}

}
// animation - end

// membranes
var membrane1 = new Rectangle(250, 285, 60, 30);
var path = new Path.Rectangle(membrane1);
path.fillColor = 'white';

var membrane2 = new Rectangle(540, 285, 60, 30);
var path = new Path.Rectangle(membrane2);
path.fillColor = 'white';

</script>
</head>
<body>
  <canvas id="canvas" resize></canvas>
</body>
</html>
